{
  "hash": "27f7b8e078c24cca726939eebfa70296",
  "result": {
    "markdown": "---\ntitle: \"Lab 3 - Coffee ratings\"\nsubtitle: \"STA 210 - Spring 2022\"\nfooter:  \"[sta210-s22.github.io/website](https://sta210-s22.github.io/website/)\"\nlogo: \"images/logo.png\"\neditor: visual\nformat: \n  revealjs: \n    theme: slides.scss\n    transition: fade\n    slide-number: true\nexecute:\n  freeze: auto\n---\n\n\n\n\n\n# Welcome\n\n## Goals\n\n-   Meet your team!\n-   Ice breaker / get to know your team\n-   Team agreement\n-   Lab 3 - Coffee ratings\n\n## Meet your team!\n\n-   [**Click here**](https://github.com/sta210-s22/teams/blob/master/teams.csv) to find your team.\n\n-   Sit with your team.\n\n## Icebreaker\n\n-   Quick introductions: Name and hometown\n\n-   Choose a reporter: The person whose birthday is closest to January 31\n\n-   Identify 8 things everyone in the group has in common:\n\n    -   Not clothes, e.g., we're all wearing shoes!\n    -   Not body parts, e.g., we all have a nose!\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncountdown(minutes = 5, font_size = \"2em\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_ce0656c8\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;font-size:2em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">05</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n\n## Team name + agreement\n\n-   Come up with a team name.\n    You can't have the same name as another group in the class, so be creative!\n\n    -   Your TA will get your team name by the end of lab.\n\n-   Fill out the team agreement.\n    The goals of the agreement are to...\n\n    -   Gain a common understanding of the team's goals and expectations for collaboration\n    -   Make a plan for team communication\n    -   Make a plan for working outside of lab\n\n## Team workflow\n\n-   Only one team member should type at a time.\n    There are markers in today's lab to help you determine whose turn it is to type.\n\n    -   Every team member should still be engaged in discussion for all questions, even if it's not your turn type.\n\n-   Don't forget to **pull** to get your teammates' updates before making changes to the `.qmd` file.\n\n-   Only **one** submission for the team on Gradescope.\n\n## Team workflow, in action\n\n-   Complete the \"Workflow: Using Git and GitHub as a team\" section of the lab in your teams.\n-   When done, pause and wait for your TA to walk you through the rest of the slides before continuing to the following section.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncountdown(minutes = 10, font_size = \"2em\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_40eacd9c\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;font-size:2em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n\n## Tips for working in a team\n\n-   Do not pressure each other to finish early; use the time wisely to really learn the material and produce a quality report.\n-   The labs are structured to help you learn the steps of a data analysis. Do not split up the lab among the team members; work on it together in its entirety.\n-   Everyone has something to contribute! Use the lab groups as an opportunity to share ideas and learn from each other.\n\n# Model diagnostics\n\n## The data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(tidymodels)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ────────────────────────────────────── tidymodels 1.2.0 ──\n✔ broom        1.0.6      ✔ rsample      1.2.1 \n✔ dials        1.2.1      ✔ tune         1.2.1 \n✔ infer        1.0.7      ✔ workflows    1.1.4 \n✔ modeldata    1.4.0      ✔ workflowsets 1.1.0 \n✔ parsnip      1.2.1      ✔ yardstick    1.3.1 \n✔ recipes      1.0.10     \n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n• Use tidymodels_prefer() to resolve common conflicts.\n```\n:::\n\n```{.r .cell-code}\ndf <- tibble(\n  x = seq(1:100),\n  y = 2*x + 20 + rnorm(100, sd = 10)\n)\n\np_data <- ggplot(df, aes(x = x, y = y)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"#8F2D56\") +\n  coord_cartesian(xlim = c(0, 200), ylim = c(0, 500))\n\np_data\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](lab-3_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n## The data + an outlier\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf2 <- df %>%\n  mutate(type = \"data\") %>%\n  bind_rows(tibble(x = 40, y = 500, type = \"outlier\"))\n\np_outlier <- ggplot(df2, aes(x = x, y = y, color = type)) +\n  geom_point(show.legend = FALSE) +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"#8F2D56\") +\n  geom_smooth(data = df, method = \"lm\", se = FALSE, color = \"#8F2D5630\") +\n  scale_color_manual(values = c(\"black\", \"magenta\")) +\n  coord_cartesian(xlim = c(0, 200), ylim = c(0, 500)) +\n  annotate(\"point\", x = 40, y = 500, size = 3, color = \"magenta\", shape = \"circle open\")\n\np_outlier\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](lab-3_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n## The data + influential point\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf3 <- df %>%\n  mutate(type = \"data\") %>%\n  bind_rows(tibble(x = 200, y = 5, type = \"influential\"))\n\np_influential <- ggplot(df3, aes(x = x, y = y, color = type)) +\n  geom_point(show.legend = FALSE) +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"#8F2D56\") +\n  geom_smooth(data = df, method = \"lm\", se = FALSE, color = \"#8F2D5630\") +\n  scale_color_manual(values = c(\"black\", \"magenta\")) +\n  coord_cartesian(xlim = c(0, 200), ylim = c(0, 500)) +\n  annotate(\"point\", x = 200, y = 5, size = 3, color = \"magenta\", shape = \"circle open\")\n\np_influential\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](lab-3_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n## Influential point\n\nAn observation is **influential** if removing it substantially changes the coefficients of the regression model.\n\n::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np_data\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](lab-3_files/figure-html/unnamed-chunk-6-1.png){width=100%}\n:::\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np_influential\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](lab-3_files/figure-html/unnamed-chunk-7-1.png){width=100%}\n:::\n:::\n\n\n:::\n:::\n\n## Influential points\n\n-   Influential points have a large impact on the coefficients and standard errors used for inference\n\n-   These points can sometimes be identified in a scatterplot if there is only one predictor variable, this is often not the case when there are multiple predictors\n\n-   We will use measures to quantify an individual observation's influence on the regression model: **leverage**, **standardized residuals**, and **Cook's distance**\n\n## Remember `augment()`?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars_fit <- linear_reg() %>%\n  set_engine(\"lm\") %>%\n  fit(mpg ~ disp, data = mtcars)\n\naugment(mtcars_fit$fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 32 × 9\n   .rownames           mpg  disp .fitted .resid   .hat .sigma .cooksd .std.resid\n   <chr>             <dbl> <dbl>   <dbl>  <dbl>  <dbl>  <dbl>   <dbl>      <dbl>\n 1 Mazda RX4          21    160     23.0 -2.01  0.0418   3.29 8.65e-3     -0.630\n 2 Mazda RX4 Wag      21    160     23.0 -2.01  0.0418   3.29 8.65e-3     -0.630\n 3 Datsun 710         22.8  108     25.1 -2.35  0.0629   3.28 1.87e-2     -0.746\n 4 Hornet 4 Drive     21.4  258     19.0  2.43  0.0328   3.27 9.83e-3      0.761\n 5 Hornet Sportabout  18.7  360     14.8  3.94  0.0663   3.22 5.58e-2      1.25 \n 6 Valiant            18.1  225     20.3 -2.23  0.0313   3.28 7.82e-3     -0.696\n 7 Duster 360         14.3  360     14.8 -0.462 0.0663   3.31 7.70e-4     -0.147\n 8 Merc 240D          24.4  147.    23.6  0.846 0.0461   3.30 1.72e-3      0.267\n 9 Merc 230           22.8  141.    23.8 -0.997 0.0482   3.30 2.50e-3     -0.314\n10 Merc 280           19.2  168.    22.7 -3.49  0.0396   3.24 2.48e-2     -1.10 \n# ℹ 22 more rows\n```\n:::\n:::\n\n\n\n## Model diagnostics {.smaller}\n\nUse the `augment()` function to output statistics that can be used to diagnose the model, along with the predicted values and residuals:\n\n::: nonincremental\n-   outcome and predictor variables in the model\n-   **`.fitted`**: predicted values\n-   **`.se.fit`**: standard errors of predicted values\n-   **`.resid`**: residuals\n-   **`.hat`**: leverage\n-   **`.sigma`**: estimate of residual standard deviation when the corresponding observation is dropped from model\n-   **`.cooksd`**: Cook's distance\n-   **`.std.resid`**: standardized residuals\n:::\n",
    "supporting": [
      "lab-3_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/countdown-0.4.0/countdown.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}